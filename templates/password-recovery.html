<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WorkWise - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body>
    <div id="passwordRecoveryPage">
      <main class="recovery-wrapper">
        <div class="recovery-center-title">
          <h1>WorkWise</h1>
          <p>–°–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ä–∞–±–æ—Ç</p>
        </div>

        <div class="recovery-center-box">
          <h2>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø</h2>

          <!-- Flash —Å–æ–æ–±—â–µ–Ω–∏—è -->
          {% with messages = get_flashed_messages(with_categories=true) %} {% if
          messages %}
          <div style="margin-bottom: 20px">
            {% for category, message in messages %}
            <div
              style="padding: 10px; border-radius: 5px; font-size: 14px; margin-bottom: 5px; 
                    {% if category == 'error' %}background: rgba(244, 67, 54, 0.1); color: #f44336; border: 1px solid #f44336;
                    {% else %}background: rgba(76, 175, 80, 0.1); color: #4caf50; border: 1px solid #4caf50;{% endif %}"
            >
              {{ message }}
            </div>
            {% endfor %}
          </div>
          {% endif %} {% endwith %}

          <form
            class="recovery-form"
            id="recoveryForm"
            method="POST"
            action="{{ url_for('password_recovery') }}"
          >
            <div class="recovery-input-group">
              <label>Email</label>
              <input
                type="email"
                name="email"
                placeholder="your.email@gmail.com"
                required
              />
            </div>

            <div class="recovery-input-group recovery-password-field">
              <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
              <input
                type="password"
                name="new_password"
                id="recoveryPassword"
                placeholder="************"
                required
              />
              <span class="recovery-eye" id="toggleRecoveryPassword">üëÅÔ∏è</span>
            </div>

            <div class="recovery-input-group recovery-password-field">
              <label>–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
              <input
                type="password"
                name="confirm_password"
                id="recoveryConfirmPassword"
                placeholder="************"
                required
              />
              <span class="recovery-eye" id="toggleRecoveryConfirmPassword"
                >üëÅÔ∏è</span
              >
            </div>
            <button type="submit" class="recovery-btn">
              –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å
            </button>

            <p class="back-link">
              –í—Å–ø–æ–º–Ω–∏–ª–∏ –ø–∞—Ä–æ–ª—å?
              <a href="{{ url_for('login') }}">–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</a>
            </p>
          </form>
        </div>
      </main>
    </div>

    <script>
      const toggleRecoveryPassword = document.getElementById(
        "toggleRecoveryPassword"
      );
      const recoveryPassword = document.getElementById("recoveryPassword");
      const toggleRecoveryConfirmPassword = document.getElementById(
        "toggleRecoveryConfirmPassword"
      );
      const recoveryConfirmPassword = document.getElementById(
        "recoveryConfirmPassword"
      );

      toggleRecoveryPassword.addEventListener("click", function () {
        const type =
          recoveryPassword.getAttribute("type") === "password"
            ? "text"
            : "password";
        recoveryPassword.setAttribute("type", type);
      });

      toggleRecoveryConfirmPassword.addEventListener("click", function () {
        const type =
          recoveryConfirmPassword.getAttribute("type") === "password"
            ? "text"
            : "password";
        recoveryConfirmPassword.setAttribute("type", type);
      });
    </script>
  </body>
</html>
